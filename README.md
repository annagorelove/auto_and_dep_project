## Автоматизация обработки данных магазина c выгрузкой в базу данных ##
### <b><i> Описание работы скрипта </i></b> ###
Скрипт генерирует N (кол-во магазинов) выгрузок в формате csv в папку <b><i> data/ </i></b>. Формат выгрузки будет указан ниже.

Задача в рамках проекта - автоматизировать обработку этих данных (а также написать скрипт для их генерации, чтобы эмулировать работу кассовой программы).

Файлы с выгрузками называются <b><i> {{shop_num}}_{{cash_num}}.csv </i></b>. Здесь <b><i> {{shop_num}} </i></b> - номер магазина, а <b><i> {{cash_num}} </i></b> - номер кассы. В одном магазине может быть много касс - у каждой своя выгрузка. Пример названия: <b><i> 11_2.csv </i></b> - 11 магазин, 2 касса.

Формат выгрузки:
- <b> doc_id </b> - численно-буквенный идентификатор чека;
- <b> item </b> - название товара;
- <b> category </b> - категория товара (бытовая химия, текстиль, посуда и т.д.);
- <b> amount </b> - кол-во товара в чеке;
- <b> price </b> - цена одной позиции без учета скидки;
- <b> discount </b> - сумма скидки на эту позицию (может быть 0).

### <b><i> Структура проекта </i></b> ###
Проект содержит файлы имеющие:
- <b> random-check.py </b> - содержит скрипт генерации рандомных значений в чеке, исходя из представленной выгрузки (все значения выгрузки определяются случайным образом, в чеке так же генерируется рандомное количество позиций за день). <n>  
Это все генерируется из словаря с категориями товаров, их названиями и ценой. Так же скрипт отбирает рандомное айди каждого чека и скидку, рассчитанную из стоимости каждого товара.
По результату работы скрипта генерируются кассовые чеки, которые потом добавляются в скрипт генерации рандомного количества магазинов для выгрузки(у каждого магазина три кассы) и количества чеков для каждого из этих магазинов.
В конце, каждому магазину\кассе присваивается CSV-файл(который хранится в <b><i> data/ </i></b>), где лежит выгрузка исходя из всех выше перечисленных скриптов.
- <b> pg.py </b> - скрипт для подключения к базе данных. Содержит конструктор класса и метод post для загрузки данных в таблицу;
- <b> run.py </b> - скрипт для записи данных в БД. После загрузки данных происходит удаление CSV-файлов в папке <b><i> data/ </i></b>;
- <b> config.ini </b> - файл с настройками скрипта. Указан путь для записи CSV-файлов и пример доступа к базе данных (для подключения и записи данных);
- <b> requirements.txt </b> - файл с установленными библиотеками, необходимыми для работы данного проекта.

### <b><i> Запуск проекта </i></b> ###
Для запуска проекта необходимо загрузить репозиторий на свой компьютер:

     [git clone https://github.com/annagorelove/auto_and_dep_project.git]

Далее установить используемые в проекте библиотеки из файла <b><i> requirements.txt </i></b>:

     pip install -r requirements.txt
В файле <b><i> config.ini </i></b> необходимо указать актуальные доступы для подключения к своей базе данных и последующей записи данных: <b><i> HOST, PORT, USER, PASSWORD </i></b>.

Скрипт на создание таблиц БД находится в <b><i> sql/ddl.sql </i></b>.

Далее необходимо запустить файл <b><i> random-check.py </i></b> для генерации кассовых чеков.

По итогу добавления чеков в папку <b><i> data/ </i></b> запустить скрипт <b><i> run.py </i></b>, который добавит выгрузку всех CSV-файлов в таблицы базы данных.
